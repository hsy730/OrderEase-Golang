# 新增店铺订单流转状态字段实现方案

## 1. 数据模型扩展

* 在Shop模型中添加一个新的字段`OrderStatusFlow`，使用datatypes.JSON类型存储订单流转状态配置

## 2. 字段设计

```go
// Shop 店铺模型
type Shop struct {
    // 现有字段保持不变
    
    // 新增字段：订单流转状态配置
    OrderStatusFlow datatypes.JSON `gorm:"column:order_status_flow;type:json" json:"order_status_flow"`
}
```

## 3. 数据库迁移

* 为Shop模型添加自动迁移，创建新字段

## 4. API修改

### 4.1 创建店铺接口 (`CreateShop`)

* 在请求结构体中添加`OrderStatusFlow`字段
* 在创建店铺时，将传入的订单流转配置存储到新字段中
* 如果未提供，使用默认配置

### 4.2 更新店铺接口 (`UpdateShop`)

* 在请求结构体中添加`OrderStatusFlow`字段
* 在更新店铺时，更新订单流转配置

### 4.3 获取店铺信息接口 (`GetShopInfo`)

* 在响应中包含`order_status_flow`字段

## 5. 默认配置

* 实现默认的订单流转状态配置，当店铺创建时如果未提供配置，则使用默认配置

## 6. 实现步骤

1. 修改Shop模型，添加OrderStatusFlow字段
2. 添加数据库迁移
3. 更新创建店铺接口
4. 更新修改店铺接口
5. 更新获取店铺信息接口
6. 实现默认配置
7. 测试验证

## 详细实现

### 1. 修改Shop模型

在`models/shop.go`中添加`OrderStatusFlow`字段

### 2. 更新创建店铺接口

在`handlers/shop.go`的`CreateShop`方法中：
* 添加`OrderStatusFlow`到请求结构体
* 在创建店铺时设置该字段

### 3. 更新修改店铺接口

在`handlers/shop.go`的`UpdateShop`方法中：
* 添加`OrderStatusFlow`到请求结构体
* 在更新店铺时更新该字段

### 4. 更新获取店铺信息接口

在`handlers/shop.go`的`GetShopInfo`方法中，在响应中包含`order_status_flow`字段

### 5. 实现默认配置

创建一个默认配置常量，当店铺创建时如果未提供配置，则使用该默认配置

## 预期效果

* 店铺可以存储自定义的订单流转状态配置
* 创建和修改店铺时可以设置订单流转状态
* 获取店铺信息时可以获取订单流转状态配置
* 如果未提供配置，使用默认配置

## 技术要点

* 使用datatypes.JSON类型存储复杂的JSON配置
* 保持与现有代码风格一致
* 确保向后兼容
* 提供合理的默认配置