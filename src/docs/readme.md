# OrderEase 接口文档

## 项目简介

OrderEase 是一个基于 DDD（领域驱动设计）架构的订单管理系统，提供店铺管理、商品管理、订单处理、用户管理等功能。

## 文档目录

| 文档 | 描述 |
|------|------|
| [api.md](./api.md) | API 文档索引，包含系统概述、接口分类、通用规范 |
| [auth.md](./auth.md) | 认证相关接口：登录、Token管理、密码修改 |
| [api_shop.md](./api_shop.md) | 店铺管理接口：店铺CRUD、数据看板、订单流转配置 |
| [api_product.md](./api_product.md) | 商品管理接口：商品CRUD、参数类别、状态管理 |
| [api_order.md](./api_order.md) | 订单管理接口：订单CRUD、状态流转、高级搜索 |
| [api_user.md](./api_user.md) | 用户管理接口：用户CRUD、前台注册登录 |
| [api_tag.md](./api_tag.md) | 标签管理接口：标签CRUD、批量操作、商品绑定 |

## 快速开始

### 1. 系统架构

OrderEase 采用 DDD 四层架构：

```
Domain（领域层）
    ↓
Application（应用层）
    ↓
Infrastructure（基础设施层）
    ↓
Interfaces（接口层）
```

### 2. 技术栈

- **Web 框架**: Gin 1.9.1
- **ORM**: GORM 1.25.7
- **数据库**: MySQL 8.0+
- **认证**: JWT Bearer Token
- **ID 生成**: Snowflake 分布式ID

### 3. 基础信息

- **基础路径**: `/api/order-ease/v1`
- **请求格式**: JSON
- **响应格式**: JSON

### 4. 认证方式

在请求头中携带 JWT Token：

```
Authorization: Bearer <your-token>
```

Token 有效期为 2 小时，过期后需刷新或重新登录。

### 5. 接口分类

| 分类 | 路径前缀 | 说明 |
|------|----------|------|
| 公开接口 | `/api/order-ease/v1` | 无需认证：登录、注册等 |
| 管理员接口 | `/api/order-ease/v1/admin` | 管理员权限 |
| 店主接口 | `/api/order-ease/v1/shopOwner` | 店主权限，只能操作自己店铺 |
| 前台接口 | `/api/order-ease/v1` | 需要认证：浏览商品、下单等 |

### 6. 默认管理员账户

- **用户名**: `admin`
- **初始密码**: `Admin@123456`

**安全提示**: 请在首次登录后立即修改密码！

## 核心功能

### 1. 店铺管理

- 店铺 CRUD 操作
- 店主账户管理
- 店铺有效期管理
- 订单状态流转配置
- 数据看板统计

### 2. 商品管理

- 商品 CRUD 操作
- 参数类别和选项（如大小、颜色）
- 商品状态管理（待上架/已上架/已下架）
- 商品图片上传

### 3. 订单管理

- 订单 CRUD 操作
- 自定义订单状态流转
- 高级搜索和筛选
- 实时订单通知（SSE）
- 未完成订单追踪

### 4. 用户管理

- 用户 CRUD 操作
- 前台用户注册登录
- 用户类型（配送/自提）

### 5. 标签管理

- 标签 CRUD 操作
- 商品标签批量操作
- 标签商品关联管理

## 开发规范

### 通用响应格式

**成功响应**:

```json
{
  "code": 200,
  "data": { ... },
  "message": "操作成功"
}
```

**错误响应**:

```json
{
  "code": 400,
  "error": "错误信息描述"
}
```

### 分页规范

列表接口默认支持分页：

| 参数 | 类型 | 默认值 | 说明 |
|------|------|--------|------|
| page | int | 1 | 页码 |
| pageSize | int | 10 | 每页数量，最大100 |

### 错误码

| HTTP 状态码 | 说明 |
|------------|------|
| 200 | 成功 |
| 400 | 请求参数错误 |
| 401 | 未认证 |
| 403 | 权限不足 |
| 404 | 资源不存在 |
| 409 | 资源冲突 |
| 429 | 请求过于频繁 |
| 500 | 服务器内部错误 |

## 更多文档

- [迁移指南](./migration.md) - 数据库迁移说明
- [Token 设计](./temp_token_design.md) - 临时令牌机制设计
- [问题分析](./token_issue_analysis.md) - Token 相关问题分析
